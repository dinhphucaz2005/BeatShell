<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Remote Controller</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #10b981;
            --danger: #ef4444;
            --warning: #f59e0b;
            --dark: #1f2937;
            --light: #f8fafc;
            --gray: #6b7280;
            --card-bg: rgba(255, 255, 255, 0.95);
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: var(--dark);
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 20px;
        }

        @media (max-width: 768px) {
            .container {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: var(--card-bg);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .header {
            grid-column: 1 / -1;
            text-align: center;
            padding: 30px;
        }

        .header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .header p {
            color: var(--gray);
            font-size: 1.1em;
        }

        .status-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding: 15px;
            background: var(--light);
            border-radius: 12px;
        }

        .connection-status {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .status-dot {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: var(--danger);
            animation: pulse 2s infinite;
        }

        .status-dot.connected {
            background: var(--secondary);
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .now-playing {
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            border-radius: 12px;
            margin-bottom: 20px;
        }

        .now-playing h3 {
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .current-track {
            font-size: 1.4em;
            font-weight: bold;
            margin: 10px 0;
        }

        .playback-info {
            display: flex;
            justify-content: space-between;
            font-size: 0.9em;
            opacity: 0.9;
        }

        .control-section {
            margin-bottom: 25px;
        }

        .section-title {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: var(--primary-dark);
            font-weight: 600;
        }

        .section-title i {
            font-size: 1.2em;
        }

        .play-controls {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 10px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(0);
        }

        .btn-play {
            background: var(--secondary);
            color: white;
        }

        .btn-stop {
            background: var(--danger);
            color: white;
        }

        .btn-pause {
            background: var(--warning);
            color: white;
        }

        .btn-resume {
            background: var(--primary);
            color: white;
        }

        .control-group {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 15px;
        }

        .control-row {
            display: flex;
            align-items: center;
            gap: 15px;
            margin: 10px 0;
        }

        .control-label {
            min-width: 80px;
            font-weight: 500;
        }

        .slider {
            flex: 1;
            height: 6px;
            -webkit-appearance: none;
            background: #ddd;
            border-radius: 3px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 18px;
            height: 18px;
            border-radius: 50%;
            background: var(--primary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .slider::-webkit-slider-thumb:hover {
            background: var(--primary-dark);
            transform: scale(1.1);
        }

        .value-display {
            min-width: 50px;
            text-align: center;
            font-weight: 600;
            color: var(--primary);
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: var(--dark);
        }

        .input-group input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e5e7eb;
            border-radius: 10px;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .input-group input:focus {
            outline: none;
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.1);
        }

        .quick-play-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin-top: 15px;
        }

        .btn-quick {
            background: #8b5cf6;
            color: white;
            font-size: 13px;
        }

        .presets-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }

        .btn-preset {
            background: var(--primary);
            color: white;
            font-size: 13px;
        }

        .logs-container {
            height: 300px;
            overflow-y: auto;
            background: #1a1a1a;
            border-radius: 10px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
        }

        .log-entry {
            margin-bottom: 8px;
            padding: 8px 12px;
            border-radius: 6px;
            border-left: 4px solid transparent;
        }

        .log-entry.info {
            background: #dbeafe;
            color: #1e40af;
            border-left-color: #3b82f6;
        }

        .log-entry.success {
            background: #d1fae5;
            color: #065f46;
            border-left-color: #10b981;
        }

        .log-entry.error {
            background: #fee2e2;
            color: #991b1b;
            border-left-color: #ef4444;
        }

        .log-entry.warning {
            background: #fef3c7;
            color: #92400e;
            border-left-color: #f59e0b;
        }

        .system-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: var(--light);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
        }

        .stat-value {
            font-size: 1.5em;
            font-weight: bold;
            color: var(--primary);
            margin: 5px 0;
        }

        .stat-label {
            font-size: 0.9em;
            color: var(--gray);
        }

        .connection-list {
            margin-top: 15px;
        }

        .client-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            background: var(--light);
            border-radius: 8px;
            margin-bottom: 8px;
        }

        .client-avatar {
            width: 32px;
            height: 32px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
        }

        .tab-container {
            margin-top: 20px;
        }

        .tabs {
            display: flex;
            border-bottom: 2px solid #e5e7eb;
            margin-bottom: 15px;
        }

        .tab {
            padding: 12px 20px;
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
        }

        .tab.active {
            border-bottom-color: var(--primary);
            color: var(--primary);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .keyboard-shortcuts {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .shortcut-item {
            display: flex;
            justify-content: space-between;
            padding: 8px 12px;
            background: var(--light);
            border-radius: 6px;
        }

        .shortcut-keys {
            background: var(--dark);
            color: white;
            padding: 2px 8px;
            border-radius: 4px;
            font-size: 11px;
            font-family: monospace;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: #e5e7eb;
            border-radius: 3px;
            overflow: hidden;
            margin: 10px 0;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--primary), var(--secondary));
            width: 0%;
            transition: width 0.3s ease;
        }

        .volume-control {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .volume-icon {
            color: var(--gray);
            font-size: 1.2em;
        }

        .fade-in {
            animation: fadeIn 0.5s ease-in;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .pulse {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body>
<div class="container">
    <div class="header card">
        <h1><i class="fas fa-music"></i> Audio Remote Controller</h1>
        <p>ƒêi·ªÅu khi·ªÉn ph√°t nh·∫°c t·ª´ xa v·ªõi giao di·ªán hi·ªán ƒë·∫°i</p>
    </div>

    <!-- Main Content -->
    <div class="main-content">
        <!-- Status Bar -->
        <div class="card">
            <div class="status-bar">
                <div class="connection-status">
                    <div class="status-dot" id="statusDot"></div>
                    <span id="statusText">ƒêang k·∫øt n·ªëi...</span>
                </div>
                <div id="clientCount">
                    <i class="fas fa-users"></i>
                    <span id="clientCountText">0 clients</span>
                </div>
                <div id="uptime">
                    <i class="fas fa-clock"></i>
                    <span id="uptimeText">00:00:00</span>
                </div>
            </div>

            <!-- Now Playing -->
            <div class="now-playing">
                <h3><i class="fas fa-play-circle"></i> ƒêANG PH√ÅT</h3>
                <div class="current-track" id="currentTrack">Ch∆∞a c√≥ b√†i h√°t n√†o</div>
                <div class="playback-info">
                    <span id="playbackTime">00:00</span>
                    <span id="playbackSource">Remote Controller</span>
                </div>
            </div>
        </div>

        <!-- Control Sections -->
        <div class="card">
            <div class="control-section">
                <h3 class="section-title"><i class="fas fa-gamepad"></i> ƒêi·ªÅu khi·ªÉn c∆° b·∫£n</h3>
                <div class="play-controls">
                    <button class="btn btn-play" onclick="playYouTube()">
                        <i class="fas fa-play"></i> Ph√°t
                    </button>
                    <button class="btn btn-pause" onclick="pauseAudio()">
                        <i class="fas fa-pause"></i> T·∫°m d·ª´ng
                    </button>
                    <button class="btn btn-resume" onclick="resumeAudio()">
                        <i class="fas fa-play"></i> Ti·∫øp t·ª•c
                    </button>
                    <button class="btn btn-stop" onclick="stopAudio()">
                        <i class="fas fa-stop"></i> D·ª´ng
                    </button>
                </div>

                <div class="control-group">
                    <div class="control-row">
                        <span class="control-label"><i class="fas fa-volume-up"></i> Volume</span>
                        <input type="range" class="slider" id="volumeSlider"
                               min="0" max="100" value="50" oninput="updateVolume(this.value)">
                        <span class="value-display" id="volumeValue">50%</span>
                    </div>

                    <div class="control-row">
                        <span class="control-label"><i class="fas fa-forward"></i> Seek</span>
                        <input type="range" class="slider" id="seekSlider"
                               min="0" max="100" value="0" oninput="updateSeek(this.value)">
                        <span class="value-display" id="seekValue">0%</span>
                    </div>
                </div>
            </div>

            <div class="control-section">
                <h3 class="section-title"><i class="fab fa-youtube"></i> Ph√°t nh·∫°c t·ª´ YouTube</h3>
                <div class="input-group">
                    <label for="youtubeId"><i class="fas fa-link"></i> ID Video YouTube</label>
                    <input type="text" id="youtubeId" placeholder="VD: dQw4w9WgXcQ" onkeypress="handleEnterKey(event)">
                </div>
                <div class="input-group">
                    <label for="videoTitle"><i class="fas fa-heading"></i> Ti√™u ƒë·ªÅ (t√πy ch·ªçn)</label>
                    <input type="text" id="videoTitle" placeholder="T√™n b√†i h√°t" onkeypress="handleEnterKey(event)">
                </div>
                <button class="btn btn-play" onclick="playYouTube()" style="width: 100%;">
                    <i class="fab fa-youtube"></i> Ph√°t t·ª´ YouTube
                </button>

                <div class="quick-play-grid">
                    <button class="btn btn-quick" onclick="quickPlay('dQw4w9WgXcQ', 'Never Gonna Give You Up')">
                        <i class="fas fa-music"></i> Rick Roll
                    </button>
                    <button class="btn btn-quick" onclick="quickPlay('kJQP7kiw5Fk', 'Despacito')">
                        <i class="fas fa-music"></i> Despacito
                    </button>
                    <button class="btn btn-quick" onclick="quickPlay('9bZkp7q19f0', 'Gangnam Style')">
                        <i class="fas fa-music"></i> Gangnam Style
                    </button>
                    <button class="btn btn-quick" onclick="quickPlay('JGwWNGJdvx8', 'Shape of You')">
                        <i class="fas fa-music"></i> Shape of You
                    </button>
                </div>
            </div>
        </div>

        <!-- Logs -->
        <div class="card">
            <h3 class="section-title"><i class="fas fa-terminal"></i> Nh·∫≠t k√Ω ho·∫°t ƒë·ªông</h3>
            <div class="logs-container" id="logs"></div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="sidebar">
        <!-- System Info -->
        <div class="card">
            <h3 class="section-title"><i class="fas fa-info-circle"></i> Th√¥ng tin h·ªá th·ªëng</h3>
            <div class="system-stats">
                <div class="stat-card">
                    <i class="fas fa-play-circle stat-icon"></i>
                    <div class="stat-value" id="statPlaying">0</div>
                    <div class="stat-label">ƒêang ph√°t</div>
                </div>
                <div class="stat-card">
                    <i class="fas fa-users stat-icon"></i>
                    <div class="stat-value" id="statClients">0</div>
                    <div class="stat-label">Clients</div>
                </div>
            </div>

            <div class="connection-list">
                <h4><i class="fas fa-network-wired"></i> K·∫øt n·ªëi hi·ªán t·∫°i</h4>
                <div id="clientList">
                    <div class="client-item">
                        <div class="client-avatar">Y</div>
                        <span>B·∫°n</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Presets -->
        <div class="card">
            <h3 class="section-title"><i class="fas fa-sliders-h"></i> C√†i ƒë·∫∑t nhanh</h3>
            <div class="presets-grid">
                <button class="btn btn-preset" onclick="setVolume(25)">
                    <i class="fas fa-volume-down"></i> Volume 25%
                </button>
                <button class="btn btn-preset" onclick="setVolume(50)">
                    <i class="fas fa-volume"></i> Volume 50%
                </button>
                <button class="btn btn-preset" onclick="setVolume(75)">
                    <i class="fas fa-volume-up"></i> Volume 75%
                </button>
                <button class="btn btn-preset" onclick="setVolume(100)">
                    <i class="fas fa-volume-up"></i> Volume 100%
                </button>
            </div>
        </div>

        <!-- Keyboard Shortcuts -->
        <div class="card">
            <h3 class="section-title"><i class="fas fa-keyboard"></i> Ph√≠m t·∫Øt</h3>
            <div class="keyboard-shortcuts">
                <div class="shortcut-item">
                    <span>Ph√°t/T·∫°m d·ª´ng</span>
                    <span class="shortcut-keys">Space</span>
                </div>
                <div class="shortcut-item">
                    <span>D·ª´ng</span>
                    <span class="shortcut-keys">S</span>
                </div>
                <div class="shortcut-item">
                    <span>TƒÉng volume</span>
                    <span class="shortcut-keys">‚Üë</span>
                </div>
                <div class="shortcut-item">
                    <span>Gi·∫£m volume</span>
                    <span class="shortcut-keys">‚Üì</span>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    class AudioController {
        constructor() {
            this.ws = null;
            this.isConnected = false;
            this.reconnectAttempts = 0;
            this.maxReconnectAttempts = 5;
            this.startTime = Date.now();
            this.connectedClients = 0;
            this.init();
        }

        init() {
            this.connect();
            this.setupEventListeners();
            this.startUptimeCounter();
        }

        connect() {
            const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
            const wsUrl = `${protocol}//${window.location.host}/ws`;

            try {
                this.ws = new WebSocket(wsUrl);
                this.setupWebSocketHandlers();
            } catch (error) {
                this.log(`L·ªói k·∫øt n·ªëi: ${error}`, 'error');
                this.scheduleReconnect();
            }
        }

        setupWebSocketHandlers() {
            this.ws.onopen = () => {
                this.isConnected = true;
                this.reconnectAttempts = 0;
                this.updateConnectionStatus(true);
                this.log('‚úÖ ƒê√£ k·∫øt n·ªëi ƒë·∫øn server', 'success');
            };

            this.ws.onmessage = (event) => {
                try {
                    const data = JSON.parse(event.data);
                    this.handleMessage(data);
                } catch (error) {
                    this.log(`‚ùå L·ªói x·ª≠ l√Ω tin nh·∫Øn: ${error}`, 'error');
                }
            };

            this.ws.onclose = () => {
                this.isConnected = false;
                this.updateConnectionStatus(false);
                this.log('üîå M·∫•t k·∫øt n·ªëi v·ªõi server', 'error');
                this.scheduleReconnect();
            };

            this.ws.onerror = (error) => {
                this.log(`‚ùå L·ªói WebSocket: ${error}`, 'error');
            };
        }

        setupEventListeners() {
            // Keyboard shortcuts
            document.addEventListener('keydown', (e) => {
                if (e.target.tagName === 'INPUT') return;

                switch(e.key) {
                    case ' ':
                        e.preventDefault();
                        this.togglePlayPause();
                        break;
                    case 's':
                    case 'S':
                        e.preventDefault();
                        stopAudio();
                        break;
                    case 'ArrowUp':
                        e.preventDefault();
                        this.adjustVolume(10);
                        break;
                    case 'ArrowDown':
                        e.preventDefault();
                        this.adjustVolume(-10);
                        break;
                }
            });

            // Volume slider
            const volumeSlider = document.getElementById('volumeSlider');
            volumeSlider.addEventListener('input', (e) => {
                document.getElementById('volumeValue').textContent = `${e.target.value}%`;
            });
        }

        handleMessage(data) {
            switch (data.type) {
                case 'connected':
                    this.log('üéâ K·∫øt n·ªëi th√†nh c√¥ng v·ªõi audio server', 'success');
                    break;
                case 'playback_started':
                    document.getElementById('currentTrack').textContent = data.title || 'Unknown';
                    document.getElementById('currentTrack').classList.add('pulse');
                    this.log(`üéµ ƒêang ph√°t: ${data.title}`, 'success');
                    document.getElementById('statPlaying').textContent = '1';
                    break;
                case 'playback_stopped':
                    document.getElementById('currentTrack').textContent = 'Ch∆∞a c√≥ b√†i h√°t n√†o';
                    document.getElementById('currentTrack').classList.remove('pulse');
                    this.log('‚èπÔ∏è ƒê√£ d·ª´ng ph√°t nh·∫°c', 'info');
                    document.getElementById('statPlaying').textContent = '0';
                    break;
                case 'playback_ended':
                    document.getElementById('currentTrack').textContent = 'Ch∆∞a c√≥ b√†i h√°t n√†o';
                    document.getElementById('currentTrack').classList.remove('pulse');
                    this.log('üèÅ B√†i h√°t ƒë√£ k·∫øt th√∫c', 'info');
                    document.getElementById('statPlaying').textContent = '0';
                    break;
                case 'playback_paused':
                    this.log('‚è∏Ô∏è ƒê√£ t·∫°m d·ª´ng', 'warning');
                    break;
                case 'playback_resumed':
                    this.log('‚ñ∂Ô∏è ƒê√£ ti·∫øp t·ª•c ph√°t', 'success');
                    break;
                case 'error':
                    this.log(`‚ùå L·ªói: ${data.message}`, 'error');
                    break;
                default:
                    this.log(`üì® Tin nh·∫Øn t·ª´ server: ${JSON.stringify(data)}`, 'info');
            }

            // Update client count
            if (data.connectedClients !== undefined) {
                this.updateClientCount(data.connectedClients);
            }
        }

        togglePlayPause() {
            if (document.getElementById('statPlaying').textContent === '1') {
                pauseAudio();
            } else {
                // Implement resume or play new
                resumeAudio();
            }
        }

        adjustVolume(change) {
            const slider = document.getElementById('volumeSlider');
            let newVolume = parseInt(slider.value) + change;
            newVolume = Math.max(0, Math.min(100, newVolume));
            slider.value = newVolume;
            document.getElementById('volumeValue').textContent = `${newVolume}%`;
            setVolume(newVolume);
        }

        updateConnectionStatus(connected) {
            const statusDot = document.getElementById('statusDot');
            const statusText = document.getElementById('statusText');

            if (connected) {
                statusDot.className = 'status-dot connected';
                statusText.textContent = 'ƒê√£ k·∫øt n·ªëi';
                statusText.style.color = '#10b981';
            } else {
                statusDot.className = 'status-dot';
                statusText.textContent = 'M·∫•t k·∫øt n·ªëi';
                statusText.style.color = '#ef4444';
            }
        }

        updateClientCount(count) {
            this.connectedClients = count;
            document.getElementById('clientCountText').textContent = `${count} clients`;
            document.getElementById('statClients').textContent = count;
        }

        startUptimeCounter() {
            setInterval(() => {
                const uptime = Math.floor((Date.now() - this.startTime) / 1000);
                const hours = Math.floor(uptime / 3600);
                const minutes = Math.floor((uptime % 3600) / 60);
                const seconds = uptime % 60;
                document.getElementById('uptimeText').textContent =
                    `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            }, 1000);
        }

        sendCommand(command) {
            if (this.isConnected && this.ws) {
                this.ws.send(JSON.stringify(command));
                this.log(`üì§ G·ª≠i l·ªánh: ${command.action}`, 'info');
            } else {
                this.log('‚ùå Ch∆∞a k·∫øt n·ªëi ƒë·∫øn server', 'error');
            }
        }

        scheduleReconnect() {
            if (this.reconnectAttempts < this.maxReconnectAttempts) {
                this.reconnectAttempts++;
                const delay = Math.min(1000 * Math.pow(2, this.reconnectAttempts), 30000);
                this.log(`üîÑ Th·ª≠ k·∫øt n·ªëi l·∫°i sau ${delay/1000} gi√¢y... (${this.reconnectAttempts}/${this.maxReconnectAttempts})`, 'info');

                setTimeout(() => this.connect(), delay);
            } else {
                this.log('üí• ƒê√£ v∆∞·ª£t qu√° s·ªë l·∫ßn th·ª≠ k·∫øt n·ªëi l·∫°i t·ªëi ƒëa', 'error');
            }
        }

        log(message, type = 'info') {
            const logs = document.getElementById('logs');
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry ${type} fade-in`;
            logEntry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;

            logs.appendChild(logEntry);
            logs.scrollTop = logs.scrollHeight;
        }
    }

    // Kh·ªüi t·∫°o controller
    const controller = new AudioController();

    // H√†m ƒëi·ªÅu khi·ªÉn
    function playAudio() {
        controller.sendCommand({ action: 'play' });
    }

    function stopAudio() {
        controller.sendCommand({ action: 'stop' });
    }

    function pauseAudio() {
        controller.sendCommand({ action: 'pause' });
    }

    function resumeAudio() {
        controller.sendCommand({ action: 'resume' });
    }

    function setVolume(volume) {
        controller.sendCommand({ action: 'volume', volume: parseInt(volume) });
    }

    function updateVolume(volume) {
        setVolume(volume);
    }

    function updateSeek(value) {
        const seconds = Math.floor((value / 100) * 180); // Gi·∫£ s·ª≠ b√†i h√°t d√†i 3 ph√∫t
        controller.sendCommand({ action: 'seek', seconds: seconds });
    }

    function playYouTube() {
        const youtubeId = document.getElementById('youtubeId').value.trim();
        const title = document.getElementById('videoTitle').value.trim();

        if (!youtubeId) {
            controller.log('‚ùå Vui l√≤ng nh·∫≠p ID video YouTube', 'error');
            return;
        }

        controller.sendCommand({
            action: 'play',
            id: youtubeId,
            title: title || `YouTube Video ${youtubeId}`
        });

        // Clear inputs
        document.getElementById('youtubeId').value = '';
        document.getElementById('videoTitle').value = '';
    }

    function quickPlay(id, title) {
        controller.sendCommand({
            action: 'play',
            id: id,
            title: title
        });
    }

    function handleEnterKey(event) {
        if (event.key === 'Enter') {
            playYouTube();
        }
    }

    // Th√™m hi·ªáu ·ª©ng cho c√°c n√∫t
    document.querySelectorAll('.btn').forEach(btn => {
        btn.addEventListener('click', function() {
            this.style.transform = 'scale(0.95)';
            setTimeout(() => {
                this.style.transform = '';
            }, 150);
        });
    });

    // Hi·ªÉn th·ªã th√¥ng b√°o ch√†o m·ª´ng
    setTimeout(() => {
        controller.log('üéâ Ch√†o m·ª´ng ƒë·∫øn v·ªõi Audio Remote Controller!', 'success');
        controller.log('üí° S·ª≠ d·ª•ng Space ƒë·ªÉ ph√°t/t·∫°m d·ª´ng, ‚Üë‚Üì ƒë·ªÉ ƒëi·ªÅu ch·ªânh volume', 'info');
    }, 1000);
</script>
</body>
</html>